import telebot
import os

BOT_TOKEN = os.environ.get('BOT_TOKEN')  # –ë–µ—Ä–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
ADMIN_CHAT_ID = "1326948684"

bot = telebot.TeleBot(BOT_TOKEN)

@bot.message_handler(commands=['start'])
def start(message):
    bot.reply_to(message, "–ü—Ä–∏–≤–µ—Ç! –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Render! üöÄ")
    user = message.from_user
    bot.send_message(ADMIN_CHAT_ID, f"–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user.first_name} (ID: {user.id})")

@bot.message_handler(commands=['getid'])
def get_id(message):
    bot.reply_to(message, f"–í–∞—à ID: {message.chat.id}")

@bot.message_handler(commands=['r'])
def reply_to_user(message):
    if str(message.chat.id) != ADMIN_CHAT_ID:
        return
    try:
        parts = message.text.split(' ', 2)
        user_id = parts[1]
        text = parts[2]
        bot.send_message(user_id, f"üí¨ –û—Ç–≤–µ—Ç: {text}")
        bot.reply_to(message, "‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!")
    except:
        bot.reply_to(message, "–û—à–∏–±–∫–∞! –ò—Å–ø–æ–ª—å–∑—É–π: /r ID_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–µ–∫—Å—Ç")

@bot.message_handler(func=lambda message: True)
def handle_message(message):
    if message.text.startswith('/'):
        return
    if str(message.chat.id) == ADMIN_CHAT_ID:
        return
    user = message.from_user
    bot.send_message(ADMIN_CHAT_ID, f"–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {user.first_name} (ID: {user.id}):\n{message.text}\n\n–û—Ç–≤–µ—Ç–∏—Ç—å: /r {user.id} —Ç–µ–∫—Å—Ç")
    bot.reply_to(message, "‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!")

print("üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –Ω–∞ Render...")
bot.delete_webhook()
bot.infinity_polling()
